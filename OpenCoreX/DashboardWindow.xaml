<Window x:Class="OpenCoreX.DashboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:overview="clr-namespace:OpenCoreX.Dashboard.Overview"
        mc:Ignorable="d"
        Title="OpenCoreX Diagnostics"
        Width="1320" Height="860"
        MinWidth="1100" MinHeight="800"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip">

	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="Dashboard/Styles/DashboardStyles.xaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Window.Resources>

	<Border Background="{StaticResource WindowBackgroundBrush}" CornerRadius="12" BorderBrush="#333" BorderThickness="1">
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="32" />
				<!-- Custom Title Bar -->
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>

			<!-- Custom Title Bar -->
			<Grid Grid.Row="0" MouseDown="TitleBar_MouseDown" Background="Transparent">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<!-- App Icon/Title -->
				<StackPanel Orientation="Horizontal" Margin="16,0,0,0" VerticalAlignment="Center">
					<TextBlock Text="OpenCoreX" FontSize="12" FontWeight="SemiBold" Foreground="#71717A" />
				</StackPanel>

				<!-- Window Controls -->
				<StackPanel Grid.Column="2" Orientation="Horizontal">
					<Button Content="—" Style="{StaticResource TitleBarButtonStyle}" Click="MinimizeButton_Click" />
					<Button Content="☐" Style="{StaticResource TitleBarButtonStyle}" Click="MaximizeButton_Click" />
					<Button Content="✕" Style="{StaticResource CloseButtonStyle}" Click="CloseButton_Click" />
				</StackPanel>
			</Grid>

			<!-- Main Content Grid -->
			<Grid Grid.Row="1">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="260" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>

				<!-- Sidebar -->
				<Border Grid.Column="0" Background="{StaticResource SidebarBackgroundBrush}" Padding="24" CornerRadius="0,0,0,12">
					<DockPanel LastChildFill="True">
						<StackPanel DockPanel.Dock="Top" Margin="0,0,0,40">
							<TextBlock Text="OpenCoreX" FontSize="24" FontWeight="Bold" Foreground="White">
								<TextBlock.Effect>
									<DropShadowEffect Color="#6366F1" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>
								</TextBlock.Effect>
							</TextBlock>
							<TextBlock Text="DASHBOARD"  FontSize="11" FontWeight="Bold" Foreground="{StaticResource SubtleTextBrush}" Margin="2,4,0,0" Opacity="0.7" />
						</StackPanel>

						<StackPanel>
							<TextBlock Text="MENU" Foreground="#52525B" FontSize="11" FontWeight="Bold" Margin="4,0,0,12" />
							<Button Content="Overview" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="0" />
							<Button Content="Hardware" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="1" />
							<Button Content="Processes" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="2" />
							<Button Content="Integrity" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="3" />
							<Button Content="Diagnostics" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="4" />
							<Button Content="Extensions" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="5" />
							<Button Content="Debloater" Style="{StaticResource NavButtonStyle}" Click="NavButton_Click" Tag="6" />
						</StackPanel>

					</DockPanel>
				</Border>

				<!-- Content Area -->
				<ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Background="{StaticResource WindowBackgroundBrush}" Padding="32">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="*" />
						</Grid.RowDefinitions>

						<!-- Header -->
						<StackPanel Grid.Row="0" Margin="0,0,0,32">
							<TextBlock Text="System Overview" FontSize="26" FontWeight="SemiBold" Foreground="White" />
							<TextBlock Text="Real-time monitoring and diagnostics" Foreground="{StaticResource SubtleTextBrush}" Margin="0,4,0,0" />
						</StackPanel>

						<!-- Tabs -->
						<TabControl Grid.Row="1" x:Name="MainTabs" Style="{StaticResource DashboardTabControlStyle}" BorderThickness="0" Background="Transparent">
							<TabControl.ItemContainerStyle>
								<Style TargetType="TabItem">
									<Setter Property="Visibility" Value="Collapsed"/>
								</Style>
							</TabControl.ItemContainerStyle>

							<!-- 0: Overview -->
							<TabItem Header="Overview">
								<StackPanel>
									<!-- Metric Cards -->
									<UniformGrid Columns="4" Margin="0,0,0,24">
										<Border Style="{StaticResource MetricCard}">
											<StackPanel>
												<Grid Margin="0,0,0,16">
													<TextBlock Text="GPU" Foreground="{StaticResource SubtleTextBrush}" FontSize="13" FontWeight="SemiBold" />
													<Path Data="M13,2L3,14H12L11,22L21,10H12L13,2Z" Fill="{StaticResource AccentBrush}" HorizontalAlignment="Right" Width="12" Height="12" Stretch="Uniform" Opacity="0.8"/>
												</Grid>
												<TextBlock Text="{Binding GpuUsagePercent, StringFormat={}{0}%}" Foreground="White" FontSize="28" FontWeight="Bold" />
												<ProgressBar Value="{Binding GpuUsagePercent}" Height="4" Margin="0,16,0,0" Foreground="{StaticResource AccentBrush}" Background="#1F1F1F" BorderThickness="0" />
											</StackPanel>
										</Border>
										<Border Style="{StaticResource MetricCard}">
											<StackPanel>
												<TextBlock Text="MEMORY" Foreground="{StaticResource SubtleTextBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,16" />
												<TextBlock Text="{Binding MemoryUsagePercent, StringFormat={}{0}%}" Foreground="White" FontSize="28" FontWeight="Bold" />
												<TextBlock Text="{Binding MemoryUsageDetails}" Foreground="{StaticResource SubtleTextBrush}" FontSize="12" Margin="0,8,0,0" />
											</StackPanel>
										</Border>
										<Border Style="{StaticResource MetricCard}">
											<StackPanel>
												<TextBlock Text="CPU" Foreground="{StaticResource SubtleTextBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,16" />
												<TextBlock Text="{Binding CpuUsagePercent, StringFormat={}{0}%}" Foreground="White" FontSize="28" FontWeight="Bold" />
												<ProgressBar Value="{Binding CpuUsagePercent}" Height="4" Margin="0,16,0,0" Foreground="{StaticResource AccentBrush}" Background="#1F1F1F" BorderThickness="0" />
											</StackPanel>
										</Border>
										<Border Style="{StaticResource MetricCard}" Margin="0">
											<StackPanel>
												<TextBlock Text="UPTIME" Foreground="{StaticResource SubtleTextBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,16" />
												<TextBlock Text="{Binding Uptime}" Foreground="White" FontSize="24" FontWeight="SemiBold" />
											</StackPanel>
										</Border>
									</UniformGrid>

									<Grid>
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="2*" />
											<ColumnDefinition Width="1*" />
										</Grid.ColumnDefinitions>

										<!-- GPU Details -->
										<Border Style="{StaticResource PanelCard}" Margin="0,0,16,0">
											<StackPanel>
												<TextBlock Text="Active Hardware" Foreground="White" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,20"/>

												<Border Background="#0A0A0A" CornerRadius="8" Padding="16" Margin="0,0,0,12" BorderBrush="#1F1F1F" BorderThickness="1">
													<Grid>
														<Grid.ColumnDefinitions>
															<ColumnDefinition Width="*" />
															<ColumnDefinition Width="Auto" />
														</Grid.ColumnDefinitions>
														<StackPanel>
															<TextBlock Text="{Binding GraphicsCard}" Foreground="White" FontWeight="SemiBold" TextTrimming="CharacterEllipsis"/>
															<TextBlock Text="Primary Graphics Adapter" Foreground="#52525B" FontSize="12" Margin="0,2,0,0"/>
														</StackPanel>
														<Border Grid.Column="1" Background="#18181B" CornerRadius="4" Padding="8 4" VerticalAlignment="Center">
															<TextBlock Text="{Binding GpuUsagePercent, StringFormat={}{0}% Load}" Foreground="#A1A1AA" FontSize="11" />
														</Border>
													</Grid>
												</Border>

												<Border Background="#0A0A0A" CornerRadius="8" Padding="16" BorderBrush="#1F1F1F" BorderThickness="1">
													<Grid>
														<Grid.ColumnDefinitions>
															<ColumnDefinition Width="*" />
															<ColumnDefinition Width="Auto" />
														</Grid.ColumnDefinitions>
														<StackPanel>
															<TextBlock Text="{Binding ProcessorInfo}" Foreground="White" FontWeight="SemiBold" TextTrimming="CharacterEllipsis"/>
															<TextBlock Text="Central Processor" Foreground="#52525B" FontSize="12" Margin="0,2,0,0"/>
														</StackPanel>
														<Border Grid.Column="1" Background="#18181B" CornerRadius="4" Padding="8 4" VerticalAlignment="Center">
															<TextBlock Text="{Binding CpuUsagePercent, StringFormat={}{0}% Load}" Foreground="#A1A1AA" FontSize="11" />
														</Border>
													</Grid>
												</Border>
											</StackPanel>
										</Border>

										<!-- System Status -->
										<Border Grid.Column="1" Style="{StaticResource PanelCard}" Margin="0">
											<StackPanel>
												<TextBlock Text="Status" Foreground="White" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,20"/>

												<Border Style="{StaticResource EventCard}">
													<DockPanel>
														<Ellipse Width="8" Height="8" Fill="#10B981" Margin="0,0,12,0" VerticalAlignment="Center"/>
														<TextBlock Text="{Binding SecureBootStatus, StringFormat=Secure Boot {0}}" Foreground="#D4D4D8" VerticalAlignment="Center"/>
													</DockPanel>
												</Border>
												<Border Style="{StaticResource EventCard}">
													<DockPanel>
														<Ellipse Width="8" Height="8" Fill="#10B981" Margin="0,0,12,0" VerticalAlignment="Center"/>
														<TextBlock Text="{Binding CoreIntegrityStatus, StringFormat=Core Integrity {0}}" Foreground="#D4D4D8" VerticalAlignment="Center"/>
													</DockPanel>
												</Border>
												<Border Style="{StaticResource EventCard}">
													<DockPanel>
														<Ellipse Width="8" Height="8" Fill="#6366F1" Margin="0,0,12,0" VerticalAlignment="Center"/>
														<TextBlock Text="{Binding WatchdogStatus, StringFormat=Watchdog {0}}" Foreground="#D4D4D8" VerticalAlignment="Center"/>
													</DockPanel>
												</Border>
											</StackPanel>
										</Border>
									</Grid>
								</StackPanel>
							</TabItem>

							<!-- Other tabs placeholders -->
							<TabItem Header="Hardware">
								<TextBlock Text="Hardware View" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" />
							</TabItem>
							<TabItem Header="Processes">
								<TextBlock Text="Processes View" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" />
							</TabItem>
							<TabItem Header="Integrity">
								<TextBlock Text="Integrity View" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" />
							</TabItem>
							<TabItem Header="Diagnostics">
								<TextBlock Text="Diagnostics View" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" />
							</TabItem>
							<TabItem Header="Extensions">
								<TextBlock Text="Extensions View" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" />
							</TabItem>

							<!-- Debloater Tab -->
							<TabItem Header="Debloater">
								<Grid>
									<Grid.RowDefinitions>
										<RowDefinition Height="*" />
										<RowDefinition Height="Auto" />
									</Grid.RowDefinitions>

									<!-- Content Columns -->
									<Grid Grid.Row="0" Margin="0,0,0,24">
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="*" />
											<ColumnDefinition Width="*" />
											<ColumnDefinition Width="*" />
										</Grid.ColumnDefinitions>

										<!-- App Removal -->
										<Border Grid.Column="0" Style="{StaticResource PanelCard}" Margin="0,0,8,0">
											<DockPanel>
												<StackPanel DockPanel.Dock="Top" Margin="0,0,0,16">
													<TextBlock Text="App Removal" Foreground="White" FontSize="18" FontWeight="SemiBold"/>
													<TextBlock Text="Select apps to remove" Foreground="{StaticResource SubtleTextBrush}" FontSize="12" Margin="0,4,0,0"/>
												</StackPanel>
												<ScrollViewer VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly" BorderThickness="0" Padding="0,0,12,0">
													<UniformGrid Columns="1">
														<CheckBox Content="OneDrive" x:Name="chkOneDrive" Margin="0,0,0,12" />
														<CheckBox Content="Cortana" x:Name="chkCortana" Margin="0,0,0,12" />
														<CheckBox Content="Xbox Apps" x:Name="chkXbox" Margin="0,0,0,12" />
														<CheckBox Content="Skype" x:Name="chkSkype" Margin="0,0,0,12" />
														<CheckBox Content="Weather" x:Name="chkWeather" Margin="0,0,0,12" />
														<CheckBox Content="News" x:Name="chkNews" Margin="0,0,0,12" />
														<CheckBox Content="Feedback Hub" x:Name="chkFeedback" Margin="0,0,0,12" />
														<CheckBox Content="Get Help" x:Name="chkGetHelp" Margin="0,0,0,12" />
														<CheckBox Content="Tips" x:Name="chkTips" Margin="0,0,0,12" />
														<CheckBox Content="Maps" x:Name="chkMaps" Margin="0,0,0,12" />
														<CheckBox Content="Solitaire" x:Name="chkSolitaire" Margin="0,0,0,12" />
														<CheckBox Content="People" x:Name="chkPeople" Margin="0,0,0,12" />
														<CheckBox Content="Your Phone" x:Name="chkYourPhone" Margin="0,0,0,12" />
														<CheckBox Content="Photos" x:Name="chkPhotos" Margin="0,0,0,12" />
														<CheckBox Content="Calculator" x:Name="chkCalculator" Margin="0,0,0,12" />
													</UniformGrid>
												</ScrollViewer>
											</DockPanel>
										</Border>

										<!-- Privacy -->
										<Border Grid.Column="1" Style="{StaticResource PanelCard}" Margin="8,0,8,0">
											<DockPanel>
												<StackPanel DockPanel.Dock="Top" Margin="0,0,0,16">
													<TextBlock Text="Privacy" Foreground="White" FontSize="18" FontWeight="SemiBold"/>
													<TextBlock Text="Reduce tracking" Foreground="{StaticResource SubtleTextBrush}" FontSize="12" Margin="0,4,0,0"/>
												</StackPanel>
												<UniformGrid Columns="1" VerticalAlignment="Top">
													<CheckBox Content="Disable Telemetry" x:Name="chkTelemetry" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable Advertising ID" x:Name="chkAds" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable Location" x:Name="chkLocation" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable Cortana Voice" x:Name="chkCortanaVoice" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable Error Reporting" x:Name="chkErrorReporting" Margin="0,0,0,12" />
													<CheckBox Content="Disable Feedback" x:Name="chkFeedbackNotif" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Restrict Background Apps" x:Name="chkBackgroundApps" Margin="0,0,0,12" />
													<CheckBox Content="Disable Start Suggestions" x:Name="chkStartSuggestions" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable Windows Update" x:Name="chkWindowsUpdate" Margin="0,0,0,12" />
												</UniformGrid>
											</DockPanel>
										</Border>

										<!-- Gaming -->
										<Border Grid.Column="2" Style="{StaticResource PanelCard}" Margin="8,0,0,0">
											<DockPanel>
												<StackPanel DockPanel.Dock="Top" Margin="0,0,0,16">
													<TextBlock Text="Gaming" Foreground="White" FontSize="18" FontWeight="SemiBold"/>
													<TextBlock Text="Boost performance" Foreground="{StaticResource SubtleTextBrush}" FontSize="12" Margin="0,4,0,0"/>
												</StackPanel>
												<UniformGrid Columns="1" VerticalAlignment="Top">
													<CheckBox Content="Ult. Performance Plan" x:Name="chkPowerPlan" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable GameDVR" x:Name="chkGameDVR" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Disable Hibernation" x:Name="chkHibernation" Margin="0,0,0,12" />
													<CheckBox Content="Disable Transparency" x:Name="chkVisualEffects" Margin="0,0,0,12" />
													<CheckBox Content="Disable Mouse Accel" x:Name="chkMouseAccel" Margin="0,0,0,12" />
													<CheckBox Content="Disable Sticky Keys" x:Name="chkStickyKeys" IsChecked="True" Margin="0,0,0,12" />
													<CheckBox Content="Optimize Network" x:Name="chkNetworkThrottling" IsChecked="True" Margin="0,0,0,12" />
												</UniformGrid>
											</DockPanel>
										</Border>
									</Grid>

									<!-- Apply Button -->
									<Button Grid.Row="1" Content="Apply Selected Changes"
											Height="40"
											Background="{StaticResource AccentBrush}"
											Foreground="White"
											FontSize="14"
											FontWeight="SemiBold"
											Click="ApplyDebloat_Click"
											HorizontalAlignment="Stretch"
											VerticalAlignment="Center"
											Margin="0,24,0,0">
										<Button.Resources>
											<Style TargetType="Border">
												<Setter Property="CornerRadius" Value="6"/>
											</Style>
										</Button.Resources>
									</Button>
								</Grid>
							</TabItem>
						</TabControl>
					</Grid>
				</ScrollViewer>
			</Grid>

			<!-- Loading Overlay -->
			<Grid x:Name="LoadingOverlay" Visibility="Collapsed" Background="#CC000000" Grid.RowSpan="2">
				<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
					<TextBlock Text="Processing Changes" FontSize="24" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center">
						<TextBlock.Effect>
							<DropShadowEffect Color="#5B9BFC" BlurRadius="20" ShadowDepth="0" Opacity="0.4"/>
						</TextBlock.Effect>
					</TextBlock>
					<TextBlock Text="Please wait while settings are applied..." FontSize="14" Foreground="{StaticResource SubtleTextBrush}" HorizontalAlignment="Center" Margin="0,5,0,30" />

					<Grid Width="350">
						<!-- Custom Rounded Progress Bar Track -->
						<Border Height="6" Background="#1C2232" CornerRadius="3" />
						<!-- Progress Bar Indicator -->
						<Border x:Name="LoadingProgress" HorizontalAlignment="Left" Width="0" Height="6" Background="{StaticResource AccentBrush}" CornerRadius="3">
							<Border.Effect>
								<DropShadowEffect Color="#8F6BFF" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
							</Border.Effect>
						</Border>
					</Grid>

					<TextBlock x:Name="LoadingStatus" Text="Initializing..." Foreground="{StaticResource SubtleTextBrush}" FontSize="12" HorizontalAlignment="Center" Margin="0,15,0,0" />
				</StackPanel>
			</Grid>
		</Grid>
	</Border>
</Window>
